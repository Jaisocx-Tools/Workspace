<!DOCTYPE html>
<html lang="en" class="jsx">
  <head>

    <title>Tree</title>

    <base href="./">

    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />



    <!--# FAVICON -->
    <!-- <link
      rel="icon"
      type="image/x-icon"
      href="https://sandbox.brightday.email/cdn/www/media/images/favicon/Icon_Jaisocx.ico"
      href-fallback="favicon/Icon_Jaisocx.ico"
      onerror="javascript: ( () => { console.log( this ); this.onerror = null; this.href = this.getAttribute( 'href-fallback' ); } )();"
    /> -->

    <link
      rel="icon"
      type="image/x-icon"
      href="https://sandbox.brightday.email/cdn/www/media/images/favicon/Icon_Sandbox_Brightday.ico"
      href-fallback="favicon/Icon_Sandbox_Brightday.ico"
      onerror="javascript: ( () => { console.log( this ); this.onerror = null; this.href = this.getAttribute( 'href-fallback' ); } )();"
    />



    <!--# FONTS PRELOAD WITHOUT JAVASCRIPT CALL -->

    <link
      fetchpriority="high"
      rel="preload"
      as="font"
      type="font/ttf"
      href="/sites_tools/js_tools/Tree/MediaAndStyles/themes/theme-base/fonts/Baloo_Paaji_2/static/BalooPaaji2-Regular.ttf"
    />

    <link
      fetchpriority="high"
      rel="preload"
      as="font"
      type="font/ttf"
      href="/sites_tools/js_tools/Tree/MediaAndStyles/themes/theme-funny/fonts/Niconne/Niconne-Regular.ttf"
    />



    <link
      fetchpriority="high"
      rel="preload"
      as="font"
      type="font/ttf"
      href="https://sandbox.brightday.email/cdn/www/fonts/LibreFranklin/static/LibreFranklin-SemiBold.ttf"
    />

    <link
      fetchpriority="high"
      rel="preload"
      as="font"
      type="font/ttf"
      href="https://sandbox.brightday.email/cdn/www/fonts/LibreFranklin/static/LibreFranklin-Regular.ttf"
    />



    <!--# CSS FOR FONTS -->
    <!-- <link
      rel="stylesheet"
      type="text/css"
      charset="utf-8"
      href="https://sandbox.brightday.email/cdn/www/fonts_css/font_Niconne_cdn.css"
    /> -->

    <!-- <link
      rel="stylesheet"
      type="text/css"
      charset="utf-8"
      href="https://sandbox.brightday.email/cdn/www/fonts_css/font_Baloo_Paaji_2_cdn.css"
    /> -->

    <link
      rel="stylesheet"
      type="text/css"
      charset="utf-8"
      href="https://sandbox.brightday.email/cdn/www/fonts_css/font_LibreFranklin_cdn.css"
    />



    <!--# CSS CLEAN START 2: html & css WHEN STARTING A SITE FROM SCRATCH -->

    <!--# importing @jaisocx/css-clean-start-2 IN DEV MODE, TO RESEARCH THE .css STYLES IN BROWSER'S DEV TOOLS IN NETWORKS TAB  -->
    <!-- <link
      rel="stylesheet"
      type="text/css"
      charset="utf-8"
      href="../../css_tools/css-clean-start-2/MediaAndStyles/CssCleanStart_2_main_relative.css"
      href-fallback="node_modules/@jaisocx/css-clean-start-2/MediaAndStyles/CssCleanStart_2_main_relative.css"
      onerror="javascript: ( () => { console.log( this ); this.onerror = null; this.href = this.getAttribute( 'href-fallback' ); } )();"
    /> -->

    <!--# THE SAME importing @jaisocx/css-clean-start-2 IN PROD MODE, PACKED BY @jaisocx/css-importer TOOL  -->
    <link
      rel="stylesheet"
      type="text/css"
      charset="utf-8"
      href="../../css_tools/css-clean-start-2/MediaAndStyles/CssCleanStart_2_main_resolved_minimal.css"
      href-fallback="node_modules/@jaisocx/css-clean-start-2/MediaAndStyles/CssCleanStart_2_main_resolved_minimal.css"
      onerror="javascript: ( () => { console.log( this ); this.onerror = null; this.href = this.getAttribute( 'href-fallback' ); } )();"
    />



    <link
      rel="stylesheet"
      type="text/css"
      charset="utf-8"
      href="MediaAndStyles/tree-styles-main.css"
    />

    <link
      rel="stylesheet"
      type="text/css"
      charset="utf-8"
      href="MediaAndStyles/themes/theme-funny/theme-funny.css"
    />



    <style>

      .jsx {
        --jsx--css-clean-start-2--h1--font-size: 1.05rem;
        --jsx--css-clean-start-2--h2--font-size: 0.9rem;
        --jsx--css-clean-start-2--h3--font-size: 0.83rem;

        --jsx--css-clean-start-2--h2--font-weight: 500;

        --theme-button-width: fit-content;
      }

      .jsx themebuttons {
        width: fit-content;
        display: grid;
        grid-auto-flow: column;
        column-gap: 3rem;
        margin: 0.9rem 0px 1.6rem 0px;
      }

      .jsx themebuttons button {
        width: var(--theme-button-width);
      }

      .current::after {
        content: "";
        position: absolute;
        bottom: -0.3rem;
        left: 0;
        width: 100%;
        height: 0;
        max-height: 0;
        overflow-y: hidden;
        border-bottom-width: 0.14rem;
        border-bottom-style: solid;
        border-bottom-color: var(--clean-start__text-color);
      }

      .jsx button {
        background-color: transparent;
        text-align: left;
      }

      #tooltip-button {
        font-family: fantasy;
      }

    </style>

  </head>

  <body>

    <main>

      <content>

        <h1>Tree rendering json data</h1>
        <h2>@jaisocx/tree</h2>
        <h3>index.example.html</h3>



        <ThemeButtons>
          <button id="button-turn-on-base-theme" data-theme="">Base Theme</button>
          <button id="button-turn-on-daymode" data-theme="theme_lightmode">Day Mode</button>
          <button id="button-turn-on-nightmode" data-theme="theme_darkmode">Night Mode</button>
        </ThemeButtons>



        <h2>json subtree type array</h2>
        <div id="example-tree-holder_SubtreeArrayOfObjects"></div>

        <h2>json subtree type object</h2>
        <div id="example-tree-holder_SubtreeLikeObjects" class="theme-funny"></div>

        <h2>load by url (should work only when published at an http server)</h2>
        <div id="example-tree-holder_load_by_url"></div>

      </content>

    </main>

  </body>





  <script
    async="true"
    defer="true"
    charset="utf-8"
    type="text/javascript"
    src="../../../packages/EventEmitter/transpiled/Simple/EventEmitter.js"
    src-fallback="node_modules/@jaisocx/event-emitter/transpiled/Simple/EventEmitter.js"
    onerror="javascript: ( () => { console.log( this ); this.onerror = null; this.src = this.getAttribute( 'src-fallback' ); } )();"
  ></script>

  <script
    async="true"
    defer="true"
    charset="utf-8"
    type="text/javascript"
    src="../../../packages/EventEmitter/transpiled/Simple/ImprovedRenderEventEmitter.js"
    src-fallback="node_modules/@jaisocx/event-emitter/transpiled/Simple/ImprovedRenderEventEmitter.js"
    onerror="javascript: ( () => { console.log( this ); this.onerror = null; this.src = this.getAttribute( 'src-fallback' ); } )();"
  ></script>

  <script
    async="true"
    defer="true"
    charset="utf-8"
    type="text/javascript"
    src="../../../packages/TokensParser/transpiled/Simple/TokensParser.js"
    src-fallback="node_modules/@jaisocx/tokens-parser/transpiled/Simple/TokensParser.js"
    onerror="javascript: ( () => { console.log( this ); this.onerror = null; this.src = this.getAttribute( 'src-fallback' ); } )();"
  ></script>

  <script
    async="true"
    defer="true"
    charset="utf-8"
    type="text/javascript"
    src="../../../packages/TemplateRenderer/transpiled/Simple/TemplateRenderer.js"
    src-fallback="node_modules/@jaisocx/template-renderer/transpiled/Simple/TemplateRenderer.js"
    onerror="javascript: ( () => { console.log( this ); this.onerror = null; this.src = this.getAttribute( 'src-fallback' ); } )();"
  ></script>

  <script
    async="true"
    defer="true"
    charset="utf-8"
    type="text/javascript"
    src="../../../sites_tools/js_tools/Tree/transpiled/Simple/typescript/ArrayOrObjectPackage.js"
    src-fallback="node_modules/@jaisocx/tree/transpiled/Simple/typescript/ArrayOrObjectPackage.js"
    onerror="javascript: ( () => { console.log( this ); this.onerror = null; this.src = this.getAttribute( 'src-fallback' ); } )();"
  ></script>



  <script
    async="true"
    defer="true"
    charset="utf-8"
    type="text/javascript"
    src="../../../sites_tools/js_tools/Tree/transpiled/Simple/typescript/TreeConstants.js"
    src-fallback="node_modules/@jaisocx/tree/transpiled/Simple/typescript/TreeConstants.js"
    onerror="javascript: ( () => { console.log( this ); this.onerror = null; this.src = this.getAttribute( 'src-fallback' ); } )();"
  ></script>

  <script
    async="true"
    defer="true"
    charset="utf-8"
    type="text/javascript"
    src="../../../sites_tools/js_tools/Tree/transpiled/Simple/typescript/TreeConf.js"
    src-fallback="node_modules/@jaisocx/tree/transpiled/Simple/typescript/TreeConf.js"
    onerror="javascript: ( () => { console.log( this ); this.onerror = null; this.src = this.getAttribute( 'src-fallback' ); } )();"
  ></script>

  <script
    async="true"
    defer="true"
    charset="utf-8"
    type="text/javascript"
    src="../../../sites_tools/js_tools/Tree/transpiled/Simple/typescript/TreeAdapter.js"
    src-fallback="node_modules/@jaisocx/tree/transpiled/Simple/typescript/TreeAdapter.js"
    onerror="javascript: ( () => { console.log( this ); this.onerror = null; this.src = this.getAttribute( 'src-fallback' ); } )();"
  ></script>

  <script
    async="true"
    defer="true"
    charset="utf-8"
    type="text/javascript"
    src="../../../sites_tools/js_tools/Tree/transpiled/Simple/typescript/TreeAdapterModeEase.js"
    src-fallback="node_modules/@jaisocx/tree/transpiled/Simple/typescript/TreeAdapterModeEase.js"
    onerror="javascript: ( () => { console.log( this ); this.onerror = null; this.src = this.getAttribute( 'src-fallback' ); } )();"
  ></script>

  <script
    async="true"
    defer="true"
    charset="utf-8"
    type="text/javascript"
    src="../../../sites_tools/js_tools/Tree/transpiled/Simple/typescript/TreeAdapterModeConf.js"
    src-fallback="node_modules/@jaisocx/tree/transpiled/Simple/typescript/TreeAdapterModeConf.js"
    onerror="javascript: ( () => { console.log( this ); this.onerror = null; this.src = this.getAttribute( 'src-fallback' ); } )();"
  ></script>

  <script
    async="true"
    defer="true"
    charset="utf-8"
    type="text/javascript"
    src="../../../sites_tools/js_tools/Tree/transpiled/Simple/typescript/Tree.js"
    src-fallback="node_modules/@jaisocx/tree/transpiled/Simple/typescript/Tree.js"
    onerror="javascript: ( () => { console.log( this ); this.onerror = null; this.src = this.getAttribute( 'src-fallback' ); } )();"
  ></script>



  <script
    async="true"
    defer="true"
    charset="utf-8"
    type="text/javascript"
  >
    // in this json structure for Tree,
    // the subtree is of type JSON array,
    // where each array item is the object,
    // having data for a Tree node rendering to html,
    // e.g. label text, Tree node html holding element css classes names, and similar.



    // -------------------
    // START  CONF DATA
    const treeJson_SubtreeArrayOfObjects = [
      {
        "icon": "https://sandbox.brightday.email/cdn/www/media/images/mini-images/sites_tools/tree/home_tree_mode_conf/house.png",
        "label": "Main",
        "opened": false,
        "text": "<h3>Main tree elem</h3>",
        "subtree": [
          {
            "icon": "https://sandbox.brightday.email/cdn/www/media/images/mini-images/sites_tools/tree/home_tree_mode_conf/google.png",
            "label": "A Link to Google",
            "href": "https://google.com/",
            "cssClassName": "hyperlink"
          },
          {
            "icon": "https://sandbox.brightday.email/cdn/www/media/images/mini-images/sites_tools/tree/home_tree_mode_conf/github.png",
            "label": "A Link to GitHub",
            "href": "https://github.com/orgs/Jaisocx-Tools/repositories",
            "cssClassName": "hyperlink"
          },
          {
            "icon": "https://sandbox.brightday.email/cdn/www/media/images/mini-images/sites_tools/tree/home_tree_mode_conf/catalog.png",
            "label": "echo html",
            "opened": false,
            "subtree": [
              {
                "icon": "https://sandbox.brightday.email/cdn/www/media/images/mini-images/sites_tools/tree/home_tree_mode_conf/html.png",
                "label": "html 1",
                "href": "javascript: void(0);",
                "text": "<h3>Hello World!</h3><p style=\"color:#26d;\">Have fun with styling and using JSTree tool.</p>"
              },
              {
                "icon": "https://sandbox.brightday.email/cdn/www/media/images/mini-images/sites_tools/tree/home_tree_mode_conf/html.png",
                "label": "html 2",
                "href": "javascript: void(0);",
                "text": "<h3>Hello World!</h3><p style=\"color:#d83;\">You can edit code easily, JSTree class is lightweight.</p>"
              },
              {
                "icon": "https://sandbox.brightday.email/cdn/www/media/images/mini-images/sites_tools/tree/home_tree_mode_conf/html.png",
                "label": "html 3",
                "href": "javascript: void(0);",
                "text": "<h3>Hello World!</h3><p style=\"color:#00bb00;\">Have a nice day.</p>"
              }
            ]
          }
        ]
      }
    ];

    // in this json structure the subtree node for sublevel tree nodes is not the array,
    // but the associative array, the object with keys, being not rendered in the Tree,
    // and object values all of type object, containing Tree node data, like label text, link address, and others.
    const treeJson_SubtreeLikeObjects = {
      "fgfgf": {
        "icon": "https://sandbox.brightday.email/cdn/www/media/images/mini-images/sites_tools/tree/home_tree_mode_conf/house.png",
        "label": "Main",
        "opened": true,
        "text": "<h3>Main tree elem</h3>",
        "subtree": {
          "frnynyr": {
            "icon": "https://sandbox.brightday.email/cdn/www/media/images/mini-images/sites_tools/tree/home_tree_mode_conf/google.png",
            "label": "A Link to Google",
            "href": "https://google.com/",
            "cssClassName": "hyperlink"
          },
          "rnyrny": {
            "icon": "https://sandbox.brightday.email/cdn/www/media/images/mini-images/sites_tools/tree/home_tree_mode_conf/github.png",
            "label": "A Link to GitHub",
            "href": "https://github.com/orgs/Jaisocx-Tools/repositories",
            "cssClassName": "hyperlink"
          },
          "rynrnyrn": {
            "icon": "https://sandbox.brightday.email/cdn/www/media/images/mini-images/sites_tools/tree/home_tree_mode_conf/catalog.png",
            "label": "echo html",
            "opened": false,
            "subtree": {
              "rnynry": {
                "icon": "https://sandbox.brightday.email/cdn/www/media/images/mini-images/sites_tools/tree/home_tree_mode_conf/html.png",
                "label": "html 1",
                "href": "javascript: void(0);",
                "text": "<h3>Hello World!</h3><p style=\"color:#26d;\">Have fun with styling and using JSTree tool.</p>"
              },
              "rynynry": {
                "icon": "https://sandbox.brightday.email/cdn/www/media/images/mini-images/sites_tools/tree/home_tree_mode_conf/html.png",
                "label": "html 2",
                "href": "javascript: void(0);",
                "text": "<h3>Hello World!</h3><p style=\"color:#d83;\">You can edit code easily, JSTree class is lightweight.</p>"
              },
              "ghnghn": {
                "icon": "https://sandbox.brightday.email/cdn/www/media/images/mini-images/sites_tools/tree/home_tree_mode_conf/html.png",
                "label": "html 3",
                "href": "javascript: void(0);",
                "text": "<h3>Hello World!</h3><p style=\"color:#00bb00;\">Have a nice day.</p>"
              }
            }
          }
        }
      }
    };
    // -------------------
    // END  CONF DATA





    let currentButtonNodeClicked = null;

    let cssClassesNames = [
      "jsx"
    ];



    // declaring the function, this is used in the event handler of the theme turning button when clicked on this button.
    function turnOnTheme ( buttonNodeClicked ) {

      if ( currentButtonNodeClicked !==  null ) {
        currentButtonNodeClicked.classList.remove( "current" );
      }

      const htmlNode = document.getElementsByTagName("html")[0];
      const htmlNodeClassList = htmlNode.classList;

      const themeCssClassPrefix = "theme";

      htmlNodeClassList.forEach (
        (cssClassName) => {
          if ( cssClassesNames.includes( cssClassName ) ) {
            return;
          }

          if ( cssClassName.startsWith( themeCssClassPrefix ) === true ) {
            htmlNodeClassList.remove( cssClassName );
          }
        }
      );

      const themeName = buttonNodeClicked.dataset.theme;
      if ( themeName && ( themeName.length !== 0 ) ) {
        htmlNode.classList.add( themeName );
      }

      currentButtonNodeClicked = buttonNodeClicked;
      currentButtonNodeClicked.classList.add( "current" );

    }

    // declaring the function, this adds to buttons the event handler to turn on the theme.
    // this function is invoked when the site loads in the browser,
    // in the event handler for the event DOMContentLoaded
    function addThemeButtonsEventHandlers() {

      const buttonsIDs = [
        "button-turn-on-base-theme",
        "button-turn-on-daymode",
        "button-turn-on-nightmode"
      ];

      for ( let buttonId of buttonsIDs ) {

        let buttonNode = document.getElementById( buttonId );

        buttonNode.addEventListener (
          "click",
          (evt) => {
            let buttonNodeClicked = evt.target;
            turnOnTheme ( buttonNodeClicked );
          }
        );

      }
    }


    // DOCUMENT ONLOAD, INVOKES THE FUNCTION TO PRELOAD THEME FONTS
    document.addEventListener('DOMContentLoaded', () => {

      // adding to buttons the event handler to turn on the theme.
      addThemeButtonsEventHandlers();

    });



    document.addEventListener('DOMContentLoaded', () => {
      const tree_SubtreeArrayOfObjects = new Tree();
      tree_SubtreeArrayOfObjects
        .setDebug(false)
        .setMainHtmlNodeId("example-tree-holder_SubtreeArrayOfObjects")
        .setNodesWithIcons(true)
        .setNodesOpenedMode(TreeConstants.NodesOpenedMode.ALL_SHOWN)
        .setModifiable(false)
        .setRenderingMode(TreeConstants.RenderingMode.Conf)
        .addJSTreeEventListener (
          TreeConstants.TreeEventsNames.EVENT_NAME__TREE_NODE_LABEL__CLICK,
          (eventName, eventPayload) => {
            console.log(eventName, eventPayload);

            // on click payload has the ref to the tree.data json, and here we show in console it's value:
            console.log( tree_SubtreeArrayOfObjects.getTreeDataNodeByJsonnodePathArray( eventPayload.jsonNode._pathArray ) );
          }
        )
        .render(treeJson_SubtreeArrayOfObjects);


      // minimum setters amount required
      const tree_SubtreeLikeObjects = new Tree();
      tree_SubtreeLikeObjects
        .setMainHtmlNodeId("example-tree-holder_SubtreeLikeObjects")
        .setNodesOpenedMode(TreeConstants.NodesOpenedMode.JSON_DATA_DEFINED)
        .setNodesWithIcons(true)
        .setRenderingMode(TreeConstants.RenderingMode.Conf)
        .render(treeJson_SubtreeLikeObjects);

      // example to load by url
      const tree_load_by_url = new Tree();
      tree_load_by_url
          .setMainHtmlNodeId("example-tree-holder_load_by_url")
          .setRenderingMode(TreeConstants.RenderingMode.Conf)
          .load("../../../webpack_builds/ExampleTree/json/tree-data.json");

    });

  </script>

</html>



